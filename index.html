<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Factorio Blueprints Decoder/Encoder</title>
<link rel="icon" href="https://i.ibb.co/Hp44999c/blueprint-book.png" type="image/png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material-darker.min.css">
<link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-logo">
       <img src="https://i.ibb.co/Hp44999c/blueprint-book.png" style="width: 30px; height: 30px;" />
        <h1>FACTORIO BLUEPRINT DECODER</h1>
      </div>
      <div>
        <a href="https://github.com/FCTostin-team" target="_blank" class="version-button">
          <span class="factorio-tooltip">
            V3.8
            <span class="tooltip-text">FCT-team edition</span>
          </span>
        </a>
      </div>
    </div>
    
    <div class="blueprint-panel">
      <div class="panel-header">
        <h3 class="panel-title">История</h3>
      </div>
      <div class="history-container">
        <div id="historyItems" class="history-items"></div>
        <button onclick="clearHistory()" class="button-danger">Очистить</button>
      </div>
    </div>
    
    <div class="blueprint-panel">
      <div class="panel-header">
        <h3 class="panel-title">Строка чертежа</h3>
      </div>
      <textarea id="blueprintInput" placeholder="Вставьте строку чертежа...">0eJyrVkrKKU0tKMrMK4lPys/PVrKqRogUK1lFx+ooZZak5ipZIYR1wQp1lHISk1JzgBIXFl3YerHxYtOFfRc2XdhwsV/hwq4Ley/su[...]
      <div class="button-group">
        <button onclick="decodeBlueprint()" class="button-primary">Decode</button>
        <button onclick="clearBlueprint()" class="button-danger">Удалить</button>
      </div>
    </div>
    
    <div class="blueprint-panel">
      <div class="panel-header">
        <h3 class="panel-title">JSON редактор</h3>
      </div>
      <div class="search-container">
        <input type="text" id="searchInput" class="search-input" placeholder="Поиск в JSON...">
        <button onclick="searchInJson()">Найти</button>
        <button onclick="findNext()">Следующий</button>
        <button onclick="findPrev()">Предыдущий</button>
        <button onclick="toggleReplaceUI()">Заменить</button>
      </div>

      <div id="replaceContainer" class="replace-container">
          <div class="replace-fields">
              <input type="text" id="replaceInput" placeholder="Текст для замены...">
              <input type="text" id="replaceWithInput" placeholder="Заменить на...">
          </div>
          <button onclick="replaceAll()" class="button-primary">Заменить все</button>
      </div>
      
      <div id="jsonEditorContainer" class="json-editor-container"></div>

      <button onclick="encodeJson()" class="button-primary">Encode</button>
    </div>
    
    <div class="blueprint-panel">
      <div class="panel-header">
        <h3 class="panel-title">Encoded Blueprint</h3>
      </div>
      <textarea id="encodedOutput" readonly></textarea>
      <div class="button-group">
        <button onclick="copyEncodedBlueprint()">Скопировать</button>
      </div>
    </div>
    
    <div class="footer">
      <div class="footer-links">
        <p><a href="https://www.youtube.com/@FCT-Ostin" target="_blank">YouTube</a></p>
        <p><a href="https://t.me/FCTostin" target="_blank">Telegram</a></p>
        <p><a href="https://steamcommunity.com/groups/FCTgroup" target="_blank">Steam Group</a></p>
        <p><a href="https://www.patreon.com/c/OstinFCT" target="_blank">Patreon</a></p>
        <p><a href="https://boosty.to/ostinfct" target="_blank">Boosty</a></p>
      </div>
      <div class="footer-links">
        <p>Руководство Steam: <a href="https://steamcommunity.com/sharedfiles/filedetails/?id=3478429132" target="_blank">Декодер/Енкодер чертежа</a></p>
        <p>Создано при поддержке Телеграм сообщества FCTostin</p>
      </div>
    </div>
  </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/matchbrackets.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/closebrackets.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/search/searchcursor.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/search/matchesonscrollbar.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/search/match-highlighter.min.js"></script>
<script src="script.js"></script>
</body>
</html>
